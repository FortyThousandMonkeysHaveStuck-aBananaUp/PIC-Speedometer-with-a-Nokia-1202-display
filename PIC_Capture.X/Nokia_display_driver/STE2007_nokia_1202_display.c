
//#define STM_STE2007_nokia_1202_display//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#define PIC_STE2007_nokia_1202_display

#ifdef STM_STE2007_nokia_1202_display
//#include "main.h"
//#define LED_VT  GPIO_PIN_0      //PA0

//#define CS  GPIO_PIN_3          //PA3
#define CS_up   HAL_GPIO_WritePin(GPIOA, GPIO_PIN_3, GPIO_PIN_SET)
#define CS_down HAL_GPIO_WritePin(GPIOA, GPIO_PIN_3, GPIO_PIN_RESET)

//#define SCK  GPIO_PIN_1         //PA1
#define SCK_up HAL_GPIO_WritePin(GPIOA, GPIO_PIN_1, GPIO_PIN_SET)
#define SCK_down HAL_GPIO_WritePin(GPIOA, GPIO_PIN_1, GPIO_PIN_RESET)

//#define MOSI  GPIO_PIN_2        //PA2
#define MOSI_up   HAL_GPIO_WritePin(GPIOA, GPIO_PIN_2, GPIO_PIN_SET)
#define MOSI_down HAL_GPIO_WritePin(GPIOA, GPIO_PIN_2, GPIO_PIN_RESET)

//#define RESET  GPIO_PIN_4       //PA4
#define RESET_up   HAL_GPIO_WritePin(GPIOA, GPIO_PIN_4, GPIO_PIN_SET)
#define RESET_down HAL_GPIO_WritePin(GPIOA, GPIO_PIN_4, GPIO_PIN_RESET)

//Up Display_LED                  //PA0
#define Display_LED_up HAL_GPIO_WritePin(GPIOA, GPIO_PIN_0, GPIO_PIN_SET);//Up Display_LED         
#define Display_LED_down HAL_GPIO_WritePin(GPIOA, GPIO_PIN_0, GPIO_PIN_RESET);

#endif


#ifdef PIC_STE2007_nokia_1202_display

#include "../Nokia_display_driver/STE2007_nokia_1202_display.h"
#include <xc.h>
//#define LED_VT  GPIO_PIN_0      //PA0

//RB0 Led
//RB1 SCK
//RB2 MOSI
//RB3 CS
//RB4 RESET

//#define CS as RA3
#define CS_up   PORTBbits.RB3=1
#define CS_down PORTBbits.RB3=0

//#define SCK as RA1
#define SCK_up PORTBbits.RB1=1
#define SCK_down PORTBbits.RB1=0

//#define MOSI as RA2
#define MOSI_up   PORTBbits.RB2=1
#define MOSI_down PORTBbits.RB2=0

//#define RESET as RA4
#define RESET_up   PORTBbits.RB4=1
#define RESET_down PORTBbits.RB4=0

//Up Display_LED as RA0
#define Display_LED_up PORTBbits.RB0=1
#define Display_LED_down PORTBbits.RB0=0
#endif

// Формат символов: 5x8. Установленный бит соответствует включенному пикселю
const unsigned char nlcd_Font[256][5] ={
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 0	'\0' (0x00)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 1	'.' (0x01)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 2	'.' (0x02)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 3	'.' (0x03)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 4	'.' (0x04)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 5	'.' (0x05)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 6	'.' (0x06)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 7	'\a' (0x07)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 8	'\b' (0x08)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 9	'\t' (0x09)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 10	'\n' (0x0A)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 11	'\v' (0x0B)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 12	'\f' (0x0C)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 13	'\r' (0x0D)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 14	'.' (0x0E)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 15	'.' (0x0F)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 16	'.' (0x10)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 17	'.' (0x11)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 18	'.' (0x12)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 19	'.' (0x13)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 20	'.' (0x14)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 21	'.' (0x15)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 22	'.' (0x16)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 23	'.' (0x17)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 24	'.' (0x18)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 25	'.' (0x19)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 26	'.' (0x1A)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 27	'.' (0x1B)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 28	'.' (0x1C)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 29	'.' (0x1D)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 30	'.' (0x1E)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 31	'.' (0x1F)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 32	' ' (0x20)
{0x00, 0x00, 0x5F, 0x00, 0x00},//№ 33	'!' (0x21)
{0x00, 0x07, 0x00, 0x07, 0x00},//№ 34	'"' (0x22)
{0x14, 0x7F, 0x14, 0x7F, 0x14},//№ 35	'#' (0x23)
{0x24, 0x2A, 0x7F, 0x2A, 0x12},//№ 36	'$' (0x24)
{0x23, 0x13, 0x08, 0x64, 0x62},//№ 37	'%' (0x25)
{0x36, 0x49, 0x55, 0x22, 0x50},//№ 38	'&' (0x26)
{0x00, 0x05, 0x03, 0x00, 0x00},//№ 39	''' (0x27)
{0x00, 0x1C, 0x22, 0x41, 0x00},//№ 40	'(' (0x28)
{0x00, 0x41, 0x22, 0x1C, 0x00},//№ 41	')' (0x29)
{0x08, 0x2A, 0x1C, 0x2A, 0x08},//№ 42	'*' (0x2A)
{0x08, 0x08, 0x3E, 0x08, 0x08},//№ 43	'+' (0x2B)
{0x00, 0x50, 0x30, 0x00, 0x00},//№ 44	',' (0x2C)
{0x08, 0x08, 0x08, 0x08, 0x08},//№ 45	'-' (0x2D)
{0x00, 0x60, 0x60, 0x00, 0x00},//№ 46	'.' (0x2E)
{0x20, 0x10, 0x08, 0x04, 0x02},//№ 47	'/' (0x2F)
{0x3E, 0x51, 0x49, 0x45, 0x3E},//№ 48	'0' (0x30)
{0x00, 0x42, 0x7F, 0x40, 0x00},//№ 49	'1' (0x31)
{0x42, 0x61, 0x51, 0x49, 0x46},//№ 50	'2' (0x32)
{0x21, 0x41, 0x45, 0x4B, 0x31},//№ 51	'3' (0x33)
{0x18, 0x14, 0x12, 0x7F, 0x10},//№ 52	'4' (0x34)
{0x27, 0x45, 0x45, 0x45, 0x39},//№ 53	'5' (0x35)
{0x3C, 0x4A, 0x49, 0x49, 0x30},//№ 54	'6' (0x36)
{0x01, 0x71, 0x09, 0x05, 0x03},//№ 55	'7' (0x37)
{0x36, 0x49, 0x49, 0x49, 0x36},//№ 56	'8' (0x38)
{0x06, 0x49, 0x49, 0x29, 0x1E},//№ 57	'9' (0x39)
{0x00, 0x36, 0x36, 0x00, 0x00},//№ 58	':' (0x3A)
{0x00, 0x56, 0x36, 0x00, 0x00},//№ 59	';' (0x3B)
{0x00, 0x08, 0x14, 0x22, 0x41},//№ 60	'<' (0x3C)
{0x14, 0x14, 0x14, 0x14, 0x14},//№ 61	'=' (0x3D)
{0x41, 0x22, 0x14, 0x08, 0x00},//№ 62	'>' (0x3E)
{0x02, 0x01, 0x51, 0x09, 0x06},//№ 63	'?' (0x3F)
{0x32, 0x49, 0x79, 0x41, 0x3E},//№ 64	'@' (0x40)
{0x7E, 0x11, 0x11, 0x11, 0x7E},//№ 65	'A' (0x41)
{0x7F, 0x49, 0x49, 0x49, 0x36},//№ 66	'B' (0x42)
{0x3E, 0x41, 0x41, 0x41, 0x22},//№ 67	'C' (0x43)
{0x7F, 0x41, 0x41, 0x22, 0x1C},//№ 68	'D' (0x44)
{0x7F, 0x49, 0x49, 0x49, 0x41},//№ 69	'E' (0x45)
{0x7F, 0x09, 0x09, 0x01, 0x01},//№ 70	'F' (0x46)
{0x3E, 0x41, 0x41, 0x51, 0x32},//№ 71	'G' (0x47)
{0x7F, 0x08, 0x08, 0x08, 0x7F},//№ 72	'H' (0x48)
{0x00, 0x41, 0x7F, 0x41, 0x00},//№ 73	'I' (0x49)
{0x20, 0x40, 0x41, 0x3F, 0x01},//№ 74	'J' (0x4A)
{0x7F, 0x08, 0x14, 0x22, 0x41},//№ 75	'K' (0x4B)
{0x7F, 0x40, 0x40, 0x40, 0x40},//№ 76	'L' (0x4C)
{0x7F, 0x02, 0x04, 0x02, 0x7F},//№ 77	'M' (0x4D)
{0x7F, 0x04, 0x08, 0x10, 0x7F},//№ 78	'N' (0x4E)
{0x3E, 0x41, 0x41, 0x41, 0x3E},//№ 79	'O' (0x4F)
{0x7F, 0x09, 0x09, 0x09, 0x06},//№ 80	'P' (0x50)
{0x3E, 0x41, 0x51, 0x21, 0x5E},//№ 81	'Q' (0x51)
{0x7F, 0x09, 0x19, 0x29, 0x46},//№ 82	'R' (0x52)
{0x46, 0x49, 0x49, 0x49, 0x31},//№ 83	'S' (0x53)
{0x01, 0x01, 0x7F, 0x01, 0x01},//№ 84	'T' (0x54)
{0x3F, 0x40, 0x40, 0x40, 0x3F},//№ 85	'U' (0x55)
{0x1F, 0x20, 0x40, 0x20, 0x1F},//№ 86	'V' (0x56)
{0x7F, 0x20, 0x18, 0x20, 0x7F},//№ 87	'W' (0x57)
{0x63, 0x14, 0x08, 0x14, 0x63},//№ 88	'X' (0x58)
{0x03, 0x04, 0x78, 0x04, 0x03},//№ 89	'Y' (0x59)
{0x61, 0x51, 0x49, 0x45, 0x43},//№ 90	'Z' (0x5A)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 91	'№ ' (0x5B) пусто
{0x02, 0x04, 0x08, 0x10, 0x20},//№ 92	'\' (0x5C)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 93	'' (0x5D)
{0x04, 0x02, 0x01, 0x02, 0x04},//№ 94	'^' (0x5E)
{0x40, 0x40, 0x40, 0x40, 0x40},//№ 95	'_' (0x5F)
{0x00, 0x01, 0x02, 0x04, 0x00},//№ 96	'`' (0x60)
{0x20, 0x54, 0x54, 0x54, 0x78},//№ 97	'a' (0x61)
{0x7F, 0x48, 0x44, 0x44, 0x38},//№ 98	'b' (0x62)
{0x38, 0x44, 0x44, 0x44, 0x20},//№ 99	'c' (0x63)
{0x38, 0x44, 0x44, 0x48, 0x7F},//№ 100	'd' (0x64)
{0x38, 0x54, 0x54, 0x54, 0x18},//№ 101	'e' (0x65)
{0x08, 0x7E, 0x09, 0x01, 0x02},//№ 102	'f' (0x66)
{0x08, 0x14, 0x54, 0x54, 0x3C},//№ 103	'g' (0x67)
{0x7F, 0x08, 0x04, 0x04, 0x78},//№ 104	'h' (0x68)
{0x00, 0x44, 0x7D, 0x40, 0x00},//№ 105	'i' (0x69)
{0x20, 0x40, 0x44, 0x3D, 0x00},//№ 106	'j' (0x6A)
{0x00, 0x7F, 0x10, 0x28, 0x44},//№ 107	'k' (0x6B)
{0x00, 0x41, 0x7F, 0x40, 0x00},//№ 108	'l' (0x6C)
{0x7C, 0x04, 0x18, 0x04, 0x78},//№ 109	'm' (0x6D)
{0x7C, 0x08, 0x04, 0x04, 0x78},//№ 110	'n' (0x6E)
{0x38, 0x44, 0x44, 0x44, 0x38},//№ 111	'o' (0x6F)
{0x7C, 0x14, 0x14, 0x14, 0x08},//№ 112	'p' (0x70)
{0x08, 0x14, 0x14, 0x18, 0x7C},//№ 113	'q' (0x71)
{0x7C, 0x08, 0x04, 0x04, 0x08},//№ 114	'r' (0x72)
{0x48, 0x54, 0x54, 0x54, 0x20},//№ 115	's' (0x73)
{0x04, 0x3F, 0x44, 0x40, 0x20},//№ 116	't' (0x74)
{0x3C, 0x40, 0x40, 0x20, 0x7C},//№ 117	'u' (0x75)
{0x1C, 0x20, 0x40, 0x20, 0x1C},//№ 118	'v' (0x76)
{0x3C, 0x40, 0x30, 0x40, 0x3C},//№ 119	'w' (0x77)
{0x44, 0x28, 0x10, 0x28, 0x44},//№ 120	'x' (0x78)
{0x0C, 0x50, 0x50, 0x50, 0x3C},//№ 121	'y' (0x79)
{0x44, 0x64, 0x54, 0x4C, 0x44},//№ 122	'z' (0x7A)
{0x00, 0x08, 0x36, 0x41, 0x00},//№ 123	'{' (0x7B)
{0x00, 0x00, 0x7F, 0x00, 0x00},//№ 124	'|' (0x7C)
{0x00, 0x41, 0x36, 0x08, 0x00},//№ 125	'}' (0x7D)
{0x02, 0x01, 0x02, 0x04, 0x02},//№ 126	'~' (0x7E)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 127	'.' (0x7F) пусто [...
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 128	'Ђ' (0x80)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 129	'Ѓ' (0x81)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 130	'‚' (0x82)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 131	'ѓ' (0x83)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 132	'„' (0x84)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 133	'…' (0x85)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 134	'†' (0x86)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 135	'‡' (0x87)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 136	'€' (0x88)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 137	'‰' (0x89)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 138	'Љ' (0x8A)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 139	'‹' (0x8B)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 140	'Њ' (0x8C)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 141	'Ќ' (0x8D)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 142	'Ћ' (0x8E)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 143	'Џ' (0x8F)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 144	'ђ' (0x90)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 145	'‘' (0x91)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 146	'’' (0x92)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 147	'“' (0x93)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 148	'”' (0x94)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 149	'•' (0x95)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 150	'–' (0x96)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 151	'—' (0x97)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 152	'?' (0x98)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 153	'™' (0x99)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 154	'љ' (0x9A)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 155	'›' (0x9B)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 156	'њ' (0x9C)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 157	'ќ' (0x9D)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 158	'ћ' (0x9E)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 159	'џ' (0x9F)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 160	' ' (0xA0)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 161	'Ў' (0xA1)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 162	'ў' (0xA2)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 163	'Ј' (0xA3)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 164	'¤' (0xA4)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 165	'Ґ' (0xA5)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 166	'¦' (0xA6)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 167	'§' (0xA7)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 168	'Ё' (0xA8)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 169	'©' (0xA9)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 170	'Є' (0xAA)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 171	'«' (0xAB)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 172	'¬' (0xAC)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 173	'­' (0xAD)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 174	'®' (0xAE)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 175	'Ї' (0xAF)
{0x00, 0x00, 0x07, 0x05, 0x07},//№ 176	'°' (0xB0)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 177	'±' (0xB1)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 178	'І' (0xB2)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 179	'і' (0xB3)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 180	'ґ' (0xB4)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 181	'µ' (0xB5)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 182	'¶' (0xB6)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 183	'·' (0xB7)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 184	'ё' (0xB8)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 185	'№' (0xB9)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 186	'є' (0xBA)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 187	'»' (0xBB)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 188	'ј' (0xBC)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 189	'Ѕ' (0xBD)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 190	'ѕ' (0xBE)
{0x00, 0x00, 0x00, 0x00, 0x00},//№ 191	'ї' (0xBF)		пусто ...]
{ 0x7E, 0x11, 0x11, 0x11, 0x7E },  //№ 192	'А' (0xC0)
{ 0x7F, 0x49, 0x49, 0x49, 0x33 },  //№ 193	'Б' (0xC1)
{ 0x7F, 0x49, 0x49, 0x49, 0x36 },  //№ 194	'В' (0xC2)
{ 0x7F, 0x01, 0x01, 0x01, 0x03 },  //№ 195	'Г' (0xC3)
{ 0xE0, 0x51, 0x4F, 0x41, 0xFF },  //№ 196	'Д' (0xC4)
{ 0x7F, 0x49, 0x49, 0x49, 0x49 },  //№ 197	'Е' (0xC5)
{ 0x77, 0x08, 0x7F, 0x08, 0x77 },  //№ 198	'Ж' (0xC6)
{ 0x49, 0x49, 0x49, 0x49, 0x36 },  //№ 199	'З' (0xC7)
{ 0x7F, 0x10, 0x08, 0x04, 0x7F },  //№ 200	'И' (0xC8)
{ 0x7C, 0x21, 0x12, 0x09, 0x7C },  //№ 201	'Й' (0xC9)
{ 0x7F, 0x08, 0x14, 0x22, 0x41 },  //№ 202	'К' (0xCA)
{ 0x20, 0x41, 0x3F, 0x01, 0x7F },  //№ 203	'Л' (0xCB)
{ 0x7F, 0x02, 0x0C, 0x02, 0x7F },  //№ 204	'М' (0xCC)
{ 0x7F, 0x08, 0x08, 0x08, 0x7F },  //№ 205	'Н' (0xCD)
{ 0x3E, 0x41, 0x41, 0x41, 0x3E },  //№ 206	'О' (0xCE)
{ 0x7F, 0x01, 0x01, 0x01, 0x7F },  //№ 207	'П' (0xCF)
{ 0x7F, 0x09, 0x09, 0x09, 0x06 },  //№ 208	'Р' (0xD0)
{ 0x3E, 0x41, 0x41, 0x41, 0x22 },  //№ 209	'С' (0xD1)
{ 0x01, 0x01, 0x7F, 0x01, 0x01 },  //№ 210	'Т' (0xD2)
{ 0x27, 0x48, 0x48, 0x48, 0x3F },  //№ 211	'У' (0xD3)
{ 0x1C, 0x22, 0x7F, 0x22, 0x1C },  //№ 212	'Ф' (0xD4)
{ 0x63, 0x14, 0x08, 0x14, 0x63 },  //№ 213	'Х' (0xD5)
{ 0x7F, 0x40, 0x40, 0x40, 0xFF },  //№ 214	'Ц' (0xD6)
{ 0x07, 0x08, 0x08, 0x08, 0x7F },  //№ 215	'Ч' (0xD7)
{ 0x7F, 0x40, 0x7F, 0x40, 0x7F },  //№ 216	'Ш' (0xD8)
{ 0x7F, 0x40, 0x7F, 0x40, 0xFF },  //№ 217	'Щ' (0xD9)
{ 0x01, 0x7F, 0x48, 0x48, 0x30 },  //№ 218	'Ъ' (0xDA)
{ 0x7F, 0x48, 0x30, 0x00, 0x7F },  //№ 219	'Ы' (0xDB)
{ 0x7F, 0x48, 0x48, 0x30, 0x00 },  //№ 220	'Ь' (0xDC)
{ 0x22, 0x41, 0x49, 0x49, 0x3E },  //№ 221	'Э' (0xDD)
{ 0x7F, 0x08, 0x3E, 0x41, 0x3E },  //№ 222	'Ю' (0xDE)
{ 0x46, 0x29, 0x19, 0x09, 0x7F },  //№ 223	'Я' (0xDF)
{ 0x20, 0x54, 0x54, 0x54, 0x78 },  //№ 224	'а' (0xE0)
{ 0x3C, 0x4A, 0x4A, 0x49, 0x31 },  //№ 225	'б' (0xE1)
{ 0x7C, 0x54, 0x54, 0x28, 0x00 },  //№ 226	'в' (0xE2)
{ 0x7C, 0x04, 0x04, 0x04, 0x0C },  //№ 227	'г' (0xE3)
{ 0xE0, 0x54, 0x4C, 0x44, 0xFC },  //№ 228	'д' (0xE4)
{ 0x38, 0x54, 0x54, 0x54, 0x08 },  //№ 229	'е' (0xE5)
{ 0x6C, 0x10, 0x7C, 0x10, 0x6C },  //№ 230	'ж' (0xE6)
{ 0x44, 0x44, 0x54, 0x54, 0x28 },  //№ 231	'з' (0xE7)
{ 0x7C, 0x20, 0x10, 0x08, 0x7C },  //№ 232	'и' (0xE8)
{ 0x78, 0x42, 0x24, 0x12, 0x78 },  //№ 233	'й' (0xE9)
{ 0x7C, 0x10, 0x28, 0x44, 0x00 },  //№ 234	'к' (0xEA)
{ 0x20, 0x44, 0x3C, 0x04, 0x7C },  //№ 235	'л' (0xEB)
{ 0x7C, 0x08, 0x10, 0x08, 0x7C },  //№ 236	'м' (0xEC)
{ 0x7C, 0x10, 0x10, 0x10, 0x7C },  //№ 237	'н' (0xED)
{ 0x38, 0x44, 0x44, 0x44, 0x38 },  //№ 238	'о' (0xEE)
{ 0x7C, 0x04, 0x04, 0x04, 0x7C },  //№ 239	'п' (0xEF)
{ 0x7C, 0x14, 0x14, 0x14, 0x08 },  //№ 240	'р' (0xF0)
{ 0x38, 0x44, 0x44, 0x44, 0x44 },  //№ 241	'с' (0xF1)
{ 0x04, 0x04, 0x7C, 0x04, 0x04 },  //№ 242	'т' (0xF2)
{ 0x0C, 0x50, 0x50, 0x50, 0x3C },  //№ 243	'у' (0xF3)
{ 0x18, 0x24, 0x7E, 0x24, 0x18 },  //№ 244	'ф' (0xF4)
{ 0x44, 0x28, 0x10, 0x28, 0x44 },  //№ 245	'х' (0xF5)
{ 0x7C, 0x40, 0x40, 0x40, 0xFC },  //№ 246	'ц' (0xF6)
{ 0x0C, 0x10, 0x10, 0x10, 0x7C },  //№ 247	'ч' (0xF7)
{ 0x7C, 0x40, 0x7C, 0x40, 0x7C },  //№ 248	'ш' (0xF8)
{ 0x7C, 0x40, 0x7C, 0x40, 0xFC },  //№ 249	'щ' (0xF9)
{ 0x04, 0x7C, 0x50, 0x50, 0x20 },  //№ 250	'ъ' (0xFA)
{ 0x7C, 0x50, 0x20, 0x00, 0x7C },  //№ 251	'ы' (0xFB)
{ 0x7C, 0x50, 0x50, 0x20, 0x00 },  //№ 252	'ь' (0xFC)
{ 0x28, 0x44, 0x54, 0x54, 0x38 },  //№ 253	'э' (0xFD)
{ 0x7C, 0x10, 0x38, 0x44, 0x38 },  //№ 254	'ю' (0xFE)
{ 0x08, 0x54, 0x34, 0x14, 0x7C }   //№ 255	'я' (0xFF)
};

const unsigned char temp_char[10]={
    0x30, //Символ 0
    0x31, //1
    0x32, //2
    0x33, //3
    0x34, //4
    0x35, //5
    0x36, //6
    0x37, //7
    0x38, //8
    0x39  //9
};


/*typedef enum{
display_initialization,
clear_all,
permanent_caption_display,
temperature_displaying,
LCD_Full
}command_word;

struct display_dc{
command_word word;
char data[2];
unsigned int delay;
};*/

    void delay_1(void)
    {
      int i=4000;
      while(i){i--;}
    }
    
    void delay_2(void)
    {
      int i=2000;
      while(i){i--;}
    }
  //struct display_dc dis={"display_initialization"};
  //ste2007_display_driver(dis);
  

    void transmit_command(char command)
    {
       delay_2();
       SCK_down;
       MOSI_down;//Бит команды 0
       SCK_up;
       
       for(unsigned char i=0;i<8;i++)
       {
          SCK_down;
          if(command&0x80)
          {MOSI_up;}
          else 
          {MOSI_down;}
          
          SCK_up;
          command<<=1;
       }

    }
    
void transmit_data(char data)
    {
       SCK_down;
       MOSI_up;//Бит данных 1
       SCK_up;
       
       for(unsigned char i=0;i<8;i++)
       {
          SCK_down;
          if(data&0x80)
          {MOSI_up;}
          else 
          {MOSI_down;}
          
          SCK_up;
          data<<=1;

       }

    } 
    
void Page_and_Column_adress_set(char Page, char Column)
{
//#Page address set
  transmit_command(0xB0|Page);//Страница от 0 до 8
                              //B0 - это страница 0
                              //B8 - это страница 8
  
//#Column address set
   char c0=0x10, c1=0;//Таблица 23 в даташите
   c1=Column&0x0F;
   c0=((Column&0x70)>>4)|0x10;
   transmit_command(c0);//Установка столбца происходит двумя командами
   transmit_command(c1);//
  
}    

void Display_symbol(char char_0)
  {
    transmit_data(nlcd_Font[char_0][0]);
    transmit_data(nlcd_Font[char_0][1]);
    transmit_data(nlcd_Font[char_0][2]);
    transmit_data(nlcd_Font[char_0][3]);
    transmit_data(nlcd_Font[char_0][4]);
  }
    
void output_character_array(char array[])
  {
    for(int i=0;array[i]!='\n';i++)
      {
         Display_symbol(array[i]);//Вывод массива Latitude
         transmit_data(0x00);//Отступ
      }
  }



void ste2007_display_driver(struct display_dc d)
{
//####################################   
    if(d.word==display_initialization)
    {    
    Display_LED_up;
    RESET_down;
    delay_1();
    
    CS_down;
    RESET_up;
    //Display_LED_up;
    delay_1();
    
    transmit_command(0xE2);//Internal reset

    //transmit_command(0x38);//Temperature Compensation???//Command Identifier
    //transmit_command(0x04);//TC=-1070 PPM
    //transmit_command(0xA0);//Sets the correspondence 
                           //between the DDRAM column address 
                           //and the SEG driver output.
                           //Normal
    
    //V0-Voltage Range (**H)
    transmit_command(0x20);
    //Electronic volume (**H)
    transmit_command(0x90);
    
    //transmit_command(0xA6);//Display normal
    //transmit_command(0xA7);//reverse
    //transmit_command(0x90);//16 Step
    //0 Step 0x80
    //31 Step 0x9F
    //transmit_command(0xEC);
    //transmit_command(0xA4);//
    //HAL_Delay(1000);
    transmit_command(0xA4);//normal display
    
    transmit_command(0xE1);//3V
    transmit_command(0x80);//3V
    //HAL_Delay(10);
    transmit_command(0x2F);//Booster ON //Voltage regulator ON// Voltage follower ON
    transmit_command(0xEF);//Refresh Rate
    transmit_command(0x00);//Refresh Rate 80 Hz
    transmit_command(0xAF);//Display ON

    Page_and_Column_adress_set(0,0);  
    
    }
//####################################     
    else if(d.word==clear_all)
    {
      Page_and_Column_adress_set(0,0);
      
      for (int num=0;num<=767;num++)//for (num=0;num<=864;num++)
      {
        transmit_data(0x00);
      }
    }
    
//####################################  
    else if(d.word==permanent_caption_display)
    {
      //char Sentence_1[7]="Engine\n";
      //char Sentence_2[12]="temperatura\n";
      char speed_word[]="Speed           \n";

      Page_and_Column_adress_set(0,0);                    //Установка адреса нулевой ячейки
      output_character_array(speed_word);                //Вывод массива с температурой 
    
//      Page_and_Column_adress_set(1,0);                    //Установка адреса нулевой ячейки
//      output_character_array(Sentence_2);                //Вывод массива с температурой 
//
//      Page_and_Column_adress_set(3,0);                    //Установка адреса нулевой ячейки
//      output_character_array(speed_word);                //Вывод массива с температурой       
      
      //Page_and_Column_adress_set(0,55);                    //Установка адреса нулевой ячейки
      //output_character_array(Sentence_3);                //Вывод массива с температурой 

      //Page_and_Column_adress_set(1,55);                    //Установка адреса нулевой ячейки
      //output_character_array(Sentence_4);                //Вывод массива с температурой   
    } 

    //####################################      
    else if(d.word==speed_displaying)
    {
    char speed[]=" 22 km/h\n";
    int Discharge_0=0;
    int Discharge_1=0;
    int Discharge_2=0;
    
    Discharge_0 = d.speed%10;                               //Вычисление единиц
    Discharge_1 = (d.speed/10)%10;                          //Вычисление десятков
    Discharge_2 = (d.speed/100)%10;                         //Вычисление сотен
    
    speed[2] = temp_char[Discharge_0];           //Разряд единиц
    speed[1] = temp_char[Discharge_1];
    speed[0] = temp_char[Discharge_2];
        
    Page_and_Column_adress_set(0,49);                    //Установка адреса нулевой ячейки!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    output_character_array(speed);                //Вывод массива с температурой !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
    }    
        
//####################################      
    else if(d.word==temperature_displaying)
    {
     ;
    }  
      else if(d.word==LCD_Full)
      {  
        char num = 0;
        //for (num=0;num<=864;num++)
        for (num=0;num<=172;num++)
        {
        transmit_data(0x46); 
        transmit_data(0x49); 
        transmit_data(0x49); 
        transmit_data(0x49); 
        transmit_data(0x31); 
        transmit_data(0x00); 
        }
      }
}




  

